// Copyright (c) 2020 Oracle and/or its affiliates.
// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.

// --- wallet configuration --- //
module "encryption" {
  source = "github.com/ocilabs/encryption"
  depends_on = [module.configuration, module.resident]
  providers = {oci = oci.service}
  tenancy   = module.configuration.tenancy
  resident  = module.configuration.resident
  wallet    = module.configuration.wallet
  input = {
    type   = "DEFAULT"  #Selection between "DEFAULT" and "VIRTUAL_PRIVATE"
    secret = var.secret_name
    phrase = var.secret_phrase
  }
  assets = {
    resident = module.resident
  }
}
output "wallet" {
  value = {
    for resource, parameter in module.encryption : resource => parameter
  }
}
// --- wallet configuration --- //